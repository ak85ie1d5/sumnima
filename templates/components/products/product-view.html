<div class="productView main{{#if theme_settings.enable_size_guide }} size-guide{{/if}} {{#if theme_settings.enable_gallery_left }} gallery-left{{/if}}"

    data-event-type="product"
    data-entity-id="{{product.id}}"
    data-name="{{product.title}}"
    data-product-category="
    {{#each product.category}}
    {{#if @last}}{{this}}{{else}}{{this}}, {{/if}}
    {{/each}}"
    data-product-brand="{{product.brand.name}}"
    data-product-price="
    {{#or customer (unless settings.hide_price_from_guests)}}
    {{#if product.price.with_tax}}
    {{product.price.with_tax.value}}
    {{else}}
    {{product.price.without_tax.value}}
    {{/if}}
    {{else}}
    {{lang 'common.login_for_pricing'}}
    {{/or}}"
    data-product-variant="single-product-option">
    {{#each product.reviews.messages}}
    {{#if error}}
    {{> components/common/alert/alert-error error}}
    {{/if}}
    {{#if success}}
    {{> components/common/alert/alert-success success}}
    {{/if}}
    {{/each}}
    
    
    {{inject 'productImages' product.images}}
    {{inject 'loaderImage' (cdn 'img/loading.svg')}}
    {{inject 'zoom_size' '500x659'}}
    {{inject 'blur_product_thumb_size' '10x10'}}
    {{inject 'blur_product_main_size' '50x50'}}
    {{inject 'product_size' theme_settings.product_size}}
    {{inject 'productview_thumb_size' '80x80'}}

    {{#if quick-view-page}}
        <input type="hidden" class="productImages" value="{{json product.images}}" />
        <input type="hidden" class="loaderImage" value="{{cdn 'img/loading.svg'}}" />
        <input type="hidden" class="zoom_size" value="500x659" />
        <input type="hidden" class="blur_product_thumb_size" value="10x10" />
        <input type="hidden" class="blur_product_main_size" value="50x50" />
        <input type="hidden" class="product_size" value="{{theme_settings.product_size}}" />
        <input type="hidden" class="productview_thumb_size" value="80x80" />
    {{/if}}

    <section class="productView-images" data-image-gallery>
        {{#filter product.options 'Color' property='display_name' }}
            {{#filter values true property='selected' }}
                {{#each ../../product.images}}
                    {{#contains (toLowerCase this.alt) (toLowerCase ../label)}}
                        {{assignVar "dataVal" "10"}}
                    {{/contains}}
                {{/each}}

                {{#if (getVar "dataVal") '==' "10"}}
                    <figure class="productView-image swiper" data-image-gallery-main>
                        <div class="productView-img-container swiper-wrapper">
                            {{#each ../../product.images}}
                                {{#contains (toLowerCase this.alt) (toLowerCase ../label)}}
                                    <img src="{{getImageSrcset this 1x=(default fallback_size '160w')}}" alt="{{this.alt}}" title="{{this.alt}}" data-sizes="auto" srcset="{{getImageSrcset this 1x=(default lqip_size '80w')}}" data-srcset="{{getImageSrcset this use_default_sizes=true }}" class="lazyload swiper-slide" />
                                {{/contains}}
                            {{/each}}
                        </div>
                        <div class="swiper-pagination"></div>
                        <div class="swiper-button-next"></div>
                        <div class="swiper-button-prev"></div>
                    </figure>

                    <ul class="productView-thumbnails">
                    
                        {{#each ../../product.images}}
                            {{#contains (toLowerCase this.alt) (toLowerCase ../label)}}
                                <li class="productView-thumbnail">
                                    <div
                                        class="productView-thumbnail-link"
                                    >
                                    {{> components/common/responsive-img
                                        image=this
                                        fallback_size=../../theme_settings.productview_thumb_size
                                        lazyload=../../theme_settings.lazyload_mode
                                    }}
                                    </div>
                                </li>
                            {{/contains}}
                        {{/each}}
                        
                    </ul>
                {{else}}
                    
                <figure class="productView-image swiper" data-image-gallery-main>
                    <div class="productView-img-container swiper-wrapper">
                        {{#each ../../product.images}}
                            <img src="{{getImageSrcset this 1x=(default fallback_size '160w')}}" alt="{{this.alt}}" title="{{this.alt}}" data-sizes="auto" srcset="{{getImageSrcset this 1x=(default lqip_size '80w')}}" data-srcset="{{getImageSrcset this use_default_sizes=true }}" class="lazyload swiper-slide" />
                        {{/each}}
                    </div>
                    <div class="swiper-pagination"></div>
                    <div class="swiper-button-next"></div>
                    <div class="swiper-button-prev"></div>
                </figure>

                <ul class="productView-thumbnails">
                
                    {{#each ../../product.images}}
                        <li class="productView-thumbnail">
                            <div
                                class="productView-thumbnail-link"
                            >
                            {{> components/common/responsive-img
                                image=this
                                fallback_size=../../theme_settings.productview_thumb_size
                                lazyload=../../theme_settings.lazyload_mode
                            }}
                            </div>
                        </li>
                    {{/each}}
                    
                </ul>
                {{/if}}
            {{else}}
                <figure class="productView-image swiper" data-image-gallery-main>
                    <div class="productView-img-container swiper-wrapper">
                        {{#each ../product.images}}
                            <img src="{{getImageSrcset this 1x=(default fallback_size '160w')}}" alt="{{this.alt}}" title="{{this.alt}}" data-sizes="auto" srcset="{{getImageSrcset this 1x=(default lqip_size '80w')}}" data-srcset="{{getImageSrcset this use_default_sizes=true }}" class="lazyload swiper-slide" />
                        {{/each}}
                    </div>
                    <div class="swiper-pagination"></div>
                    <div class="swiper-button-next"></div>
                    <div class="swiper-button-prev"></div>
                </figure>
                <ul class="productView-thumbnails">
                    {{#each ../product.images}}
                        <li class="productView-thumbnail">
                            <div
                                class="productView-thumbnail-link">
                            {{> components/common/responsive-img
                                image=this
                                fallback_size=../../theme_settings.productview_thumb_size
                                lazyload=../../theme_settings.lazyload_mode
                            }}
                        </div>
                        </li>
                    {{/each}}
                </ul>
            {{/filter}}
        {{else}}
            <figure class="productView-image swiper" data-image-gallery-main>
                <div class="productView-img-container swiper-wrapper">
                    {{#each product.images}}
                        <img src="{{getImageSrcset this 1x=(default fallback_size '160w')}}" alt="{{this.alt}}" title="{{this.alt}}" data-sizes="auto" srcset="{{getImageSrcset this 1x=(default lqip_size '80w')}}" data-srcset="{{getImageSrcset this use_default_sizes=true }}" class="lazyload swiper-slide" />
                    {{/each}}
                </div>
                <div class="swiper-pagination"></div>
                <div class="swiper-button-next"></div>
                <div class="swiper-button-prev"></div>
            </figure>
            <ul class="productView-thumbnails">
                {{#each product.images}}
                    <li class="productView-thumbnail">
                        <div
                            class="productView-thumbnail-link">
                        {{> components/common/responsive-img
                            image=this
                            fallback_size=../theme_settings.productview_thumb_size
                            lazyload=../theme_settings.lazyload_mode
                        }}
                    </div>
                    </li>
                {{/each}}
            </ul>
        {{/filter}}
    </section>

    <section class="productView-details product-data">
        <div class="productView-product">
            <h1 class="productView-title">{{product.title}}</h1>
            {{#if product.brand}}
            <h2 class="productView-brand">
            <a href="{{product.brand.url}}"><span>{{product.brand.name}}</span></a>
            </h2>
            {{/if}}
            {{#if product.call_for_price}}
            <p class="productView-price">
                <span>{{product.call_for_price}}</span>
            </p>
            {{/if}}
            <div class="productView-price">
                {{#or customer (unless settings.hide_price_from_guests)}}
                {{> components/products/price price=product.price}}
                {{else}}
                {{> components/common/login-for-pricing}}
                {{/or}}
            </div>
      
      
            <div class="productView-rating">
                {{#if settings.show_product_rating}}
                {{> components/products/ratings rating=product.rating}}
                {{#if product.num_reviews '>' 0}}
                <a href="{{product.url}}{{#if is_ajax}}#product-reviews{{/if}}" id="productReview_link">
                    {{lang 'products.reviews.link_to_review' total=product.num_reviews}}
                </a>
                {{else}}
                 <span class="no-reviews">{{lang 'products.reviews.link_to_review' total=product.num_reviews}}</span>
                {{/if}}
                {{/if}}
                {{#if settings.show_product_reviews}}
                <a href="{{product.url}}{{#if is_ajax}}#write_review{{/if}}"
                    class="productView-reviewLink productView-reviewLink--new"
                    {{#unless is_ajax}}data-reveal-id="modal-review-form"{{/unless}}
                    role="button"
                    >
                    {{lang 'products.reviews.new'}}
                </a>
                {{#unless is_ajax}}
                {{> components/products/modals/writeReview}}
                {{/unless}}
                {{/if}}
            </div>


             {{{region name="product_below_price"}}}


                  
            {{product.detail_messages}}
                {{#if settings.bulk_discount_enabled}}
                <div class="productView-info-bulkPricing">
                    {{> components/products/bulk-discount-rates bulk_discount_rates=product.bulk_discount_rates}}
                </div>
                {{/if}}
            
        </div>
    </section>
    <section class="productView-details product-options">
        <div class="productView-options">
            {{#if product.release_date }}
            <p>{{product.release_date}}</p>
            {{/if}}
            <form class="form" method="post" action="{{product.cart_url}}" enctype="multipart/form-data"
                data-cart-item-add>
                <input type="hidden" name="action" value="add">
                <input type="hidden" name="product_id" value="{{product.id}}"/>
                {{#if product.cart_order_source}}
                    <input type="hidden" name="cart_order_source" value="{{product.cart_order_source}}"/>
                {{/if}}
                <div data-product-option-change style="display:none;">
                    {{inject 'showSwatchNames' theme_settings.show_product_swatch_names}}
                    {{#each product.options}}
                    {{{dynamicComponent 'components/products/options'}}}
                    {{/each}}
                </div>


                {{#if product.stock_level '>' 10 }}          
                <div class="form-field form-field--stock{{#unless product.stock_level}} u-hiddenVisually{{/unless}}">
                    <label class="form-label form-label--alternate">
                        {{lang 'products.current_stock'}}
                        <span data-product-stock>{{product.stock_level}}</span>
                    </label>
                </div>
                {{else}}

                
                <div class="form-field form-field--stock{{#unless product.stock_level}} u-hiddenVisually{{/unless}}">
                    <label class="form-label form-label--alternate">
                      <span class="panic">{{theme_settings.low_stock_label }}</span> {{product.stock_level}} {{lang 'products.current_stock'}}!
                    </label>
                </div>            
                {{/if}}



        



                {{> components/products/add-to-cart with_wallet_buttons=true}}
                {{#if product.out_of_stock}}
                {{#if product.out_of_stock_message}}
                        {{> components/common/alert/alert-error product.out_of_stock_message}}
                {{else}}
                        {{> components/common/alert/alert-error (lang 'products.sold_out')}}
                {{/if}}
                {{/if}}
            </form>
            {{> components/products/contact-us}}
            {{#if settings.show_wishlist}}
            {{> components/common/wishlist-dropdown}}
            {{/if}}
        </div>
           {{{region name="region_below_cart--global"}}}
        {{> components/common/share url=product.url}}
              
    </section>
    


    <article class="productView-description">
        {{#if theme_settings.show_product_details_tabs}}
        {{> components/products/description-tabs}}
        {{else}}
        {{> components/products/description}}
        {{/if}}
        {{> components/products/gift-wrapping}}
    </article>
</div>
{{#all settings.show_product_reviews theme_settings.show_product_reviews}}
<div class="reviews-content">
    {{> components/products/reviews reviews=product.reviews product=product urls=urls}}
</div>
{{/all}}
<div id="previewModal" class="modal modal--large" data-reveal>
    {{> components/common/modal/modal-close-btn }}
    <div class="modal-content" role="dialog" aria-modal="true" aria-labelledby="modal-header-title"></div>
    <div class="loadingOverlay"></div>
</div>
<span class="size-chart-link">{{theme_settings.size_guide_label }}</span>

